var Pe=Object.defineProperty,ke=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var fe=(a,e,t)=>e in a?Pe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,I=(a,e)=>{for(var t in e||(e={}))De.call(e,t)&&fe(a,t,e[t]);if(pe)for(var t of pe(e))ze.call(e,t)&&fe(a,t,e[t]);return a},$=(a,e)=>ke(a,Ee(e));import{r as P,b as te,j as s,M as _,v as Ae,u as Oe,c as B,g as Ue,L as Le}from"./pb09dh9fam0wt6jz.js";import{i as R,fP as Re,pD as Ge,f as $e,oL as He,oM as Be,hj as se,oN as We,m6 as qe,P as ae,jq as Qe,lG as oe,kX as Ke,pE as ie,pF as re,kp as Xe,kY as Ze,pG as Ve,r as ce,br as je,aN as ee,eK as Ye,C as Je,B as et,T as tt,c8 as ne,im as st,e as Z,bq as nt,bj as ot,cI as it,X as rt,Z as lt,j7 as at,E as ct,j as dt}from"./bjx6p88nrzc4ug4u.js";import{ju as ve,eV as ye,jv as ut,iK as mt,jw as xt,el as ge,iW as pt,dJ as C,fQ as ft,iL as gt,jx as ht,jy as jt,jz as be,et as vt,jA as X,jB as yt,jC as bt,jD as St,jE as Ct,jF as It,jG as Se,fS as wt,jH as Ce,jI as Nt,jJ as _t,jK as Ft,jL as Mt,jM as Tt,jN as Pt,eW as kt,jO as Et,jP as Dt,fH as zt,jQ as At,b5 as Ot,b4 as Ut,i2 as Lt,i0 as Rt}from"./8i5ljbfelmyfiwtx.js";import{g as Gt,D as le}from"./fs0qxa2k8rip3kxa.js";import{P as $t}from"./lbhqvcm707can331.js";import{u as Ht}from"./nzmrf34k5gq1uhrp.js";function Bt({ctx:a,gizmoId:e,gizmoName:t,canEdit:n,gizmoEditorData:m,openFileDialog:o,pendingFiles:c,setVersion:i,pendingFileUpsertMutationsRef:p,currentModelConfig:h}){var j;const d=(j=m==null?void 0:m.files)!=null?j:[],v=Array.from(c.current.values()).filter(x=>d.every(g=>g.file_id!==x.fileId)),r=v.filter(x=>h!=null&&ie(h,x.file.type,x.file.name)===re.CodeInterpreter),l=d.filter(x=>h!=null&&x.type!=null&&ie(h,x.type,x.name)===re.CodeInterpreter),f=[...r.map(x=>x.tempId),...l.map(x=>x.file_id)];return s.jsx(bt,{gizmoId:e,gizmoName:t,canEdit:n,pendingFiles:v,pendingFileUpsertMutationsRef:p,files:d,interpreterOnlyFileIds:f,onAddFiles:o,removePendingFile:x=>{c.current.delete(x),X({ctx:a,id:e,pendingFiles:{key:x,value:null}}),i(g=>g+1)}})}const Wt=P.forwardRef(function({gizmo:e,accountPlanType:t,showInstructions:n=!0},m){var V,k;const o=ve(t),c=te(),[i,p]=P.useState(!1),h=ye(),d=ut(e),v=mt(d),r=R(),{data:l}=Re(),f=(V=l==null?void 0:l.models.get(Ge))!=null?V:l&&xt(l.models.values(),K=>K.tags.includes(Ve.GPT_4o)),j=$e(),[x,g]=P.useState(0),u=P.useRef(new Map),y=P.useRef([]),b=He(f,void 0),S=K=>{K.some(({errors:U})=>{var G;return U.length!==1||((G=U[0])==null?void 0:G.code)!==ge.TooManyFiles})?j.danger(C.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):j.danger(c.formatMessage(C.dragTooManyFilesError,{maxFileLimit:o}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},w=async K=>{ae.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const U=d.id;K.length>0&&await Promise.all(K.map(G=>{const J=Qe(G),ue={tempId:J,gizmoId:U,file:G,status:oe.Uploading,progress:1,fileId:null,cdnUrl:null};u.current.set(J,ue),X({ctx:r,id:U,pendingFiles:{key:J,value:ue}}),Ke(J,G,c,j,{kind:Ze.Gizmo,gizmoId:U},{onFileUploaded:async(T,W,q,E)=>{const D=u.current.get(T);D!=null&&D.fileId&&D!=null&&D.fileId&&(y.current.push({id:e.gizmo.id,mutationId:Ae(),update:Y=>{var me,xe;if(!D.fileId)return Y;const Te=[...(me=Y.files)!=null?me:[],{file_id:D.fileId,name:D.file.name,size:D.file.size,type:(xe=E==null?void 0:E.mimeType)!=null?xe:Xe(D.file),last_modified:D.file.lastModified,file_size_tokens:E==null?void 0:E.fileTokenSize}];return $(I({},Y),{files:Te})},onSuccess:()=>{u.current.delete(T),X({ctx:r,id:U,pendingFiles:{key:T,value:null}}),g(Y=>Y+1)}}),yt(e.gizmo.id)({projectId:e.gizmo.id,upsertProjectMutation:h,pendingFileUpsertMutationsRef:y}))},onFileCreated:(T,W,q)=>{const E=$(I({tempId:T,gizmoId:U,file:G,status:oe.Uploading,progress:1},u.current.get(T)),{fileId:W,cdnUrl:q});u.current.set(T,E),X({ctx:r,id:U,pendingFiles:{key:T,value:E}}),g(D=>D+1)},onFileUploadProgress:(T,W)=>{const q=u.current.get(T);if((q==null?void 0:q.status)===oe.Uploading){const E=$(I({},q),{progress:W>95?95:W});u.current.set(T,E),X({ctx:r,id:U,pendingFiles:{key:T,value:E}})}g(E=>E+1)},onError:T=>{u.current.delete(T),X({ctx:r,id:U,pendingFiles:{key:T,value:null}}),g(W=>W+1)}},{usesRetrievalIndex:f!=null&&ie(f,G.type,G.name)===re.Retrieval})}))},F=Be(b),M=Gt(F),N=u.current.size+d.files.length,{canEdit:z}=se(e),{open:A,getInputProps:O,getRootProps:L,isDragAccept:H,isDragReject:Q}=Ht(I({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:w,onDropRejected:S,multiple:!0,maxSize:We,maxFiles:o-N,validator:()=>N>=o?{code:ge.TooManyFiles,message:"Too many files"}:null,disabled:!z},F));return P.useImperativeHandle(m,()=>({openFileDialog:A})),s.jsxs("div",$(I({},L({className:"h-full px-4 min-w-0"})),{children:[s.jsx("input",I({},O())),n&&s.jsxs(pt,{children:[s.jsx("button",{className:"w-full",onClick:()=>p(!0),children:s.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:(k=d==null?void 0:d.instructions)!=null&&k.length?s.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:d.instructions}):s.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(_,I({},C.addCustomInstructions))}),s.jsx(ft,{className:"icon-sm"})]})})}),v.includes(gt.GizmoInstructionsTooLong)?s.jsx(ht,{className:"mt-1",children:s.jsx(_,$(I({},C.instructionsTooLong),{values:{length:jt}}))}):null]}),i&&s.jsx(be,{gizmo:e,onClose:()=>{p(!1)}}),s.jsx(Bt,{ctx:r,gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:z,gizmoEditorData:d,openFileDialog:A,pendingFiles:u,pendingFileUpsertMutationsRef:y,setVersion:g,currentModelConfig:f}),H&&s.jsxs(le,{children:[s.jsx(vt,{}),s.jsx("h3",{children:s.jsx(_,I({},C.dragInstructions))}),s.jsx("h4",{className:"w-2/3 text-center",children:M.length>0?M.join(", "):s.jsx(_,I({},C.dragAllAccepted))})]}),Q&&s.jsxs(le,{children:[s.jsx(qe,{className:"icon-2xl"}),s.jsx("h3",{children:s.jsx(_,I({},C.dragTooManyFiles))}),s.jsx("h4",{className:"w-2/3 text-center",children:s.jsx(_,$(I({},C.dragTooManyFilesDescription),{values:{maxFileLimit:o}}))})]})]}))});function Ie({gizmo:a,onClose:e,project:t}){var l;const n=te(),m=P.useRef(null),o=P.useCallback(()=>{var f;(f=m.current)==null||f.openFileDialog()},[m]),c=R(),i=ce(c),p=Oe(),{data:h}=je(a.gizmo.id),d=h!=null?h:a,{canEdit:v}=se(d),r=ee(()=>{var f;return(f=t==null?void 0:t.filesCount$())!=null?f:0});return P.useEffect(()=>{p.invalidateQueries({queryKey:Ye(p,d.gizmo.id).queryKey})},[d.gizmo.id,p]),s.jsx(s.Fragment,{children:s.jsx(Je,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:v?s.jsx(et,{color:"secondary",onClick:o,disabled:(l=i&&r>=ve(i.planType))!=null?l:!1,children:s.jsx(_,I({},C.addFilesButtonLabel))}):s.jsx(tt,{label:n.formatMessage(C.viewOnlyCustomInstructionsModalHeaderTooltip),side:"left",align:"center",children:s.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center gap-1.5 text-sm",children:[s.jsx(St,{className:"icon"}),s.jsx(_,I({},C.viewOnlyCustomInstructionsModalHeaderLabel))]})}),title:s.jsx(_,I({},C.projectFilesModalTitle)),onClose:()=>{e()},children:s.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:i&&s.jsx(Wt,{ref:m,gizmo:d,showInstructions:!1,accountPlanType:i.planType})})})})}const cs=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxFileModal:Ie},Symbol.toStringTag,{value:"Module"}));function qt({gizmo:a}){return s.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Qt,{gizmo:a,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),s.jsx(Xt,{gizmo:a,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(he,{}),s.jsx(he,{})]})})}const de=({className:a,header:e,context:t,contextClassName:n="",icon:m,onClick:o,disabled:c=!1})=>s.jsx("button",{onClick:o,disabled:c,className:Z("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",a),children:s.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[s.jsxs("div",{className:"w-full grow text-start",children:[s.jsx("div",{className:"text-sm font-medium",children:e}),s.jsx("div",{className:Z("text-token-text-secondary text-xs",n),children:t})]}),m]})}),he=()=>s.jsx(de,{disabled:!0,header:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Qt({className:a,gizmo:e}){const{files:t}=e,n=!t.length,m=R(),o=()=>ne(m,Ie,{gizmo:e});let c,i,p;const{canEdit:h}=se(e);if(n)c=s.jsx(_,I({},h?C.addFilesButtonLabel:C.viewFilesButtonLabel)),i=s.jsx(_,I({},h?C.filesControlDescription:C.noFilesReadOnlyDescription)),p=null;else{const v=t.slice(0,3);c=s.jsx(_,I({},C.projectFilesModalTitle)),i=s.jsx(_,$(I({},C.filesCount),{values:{count:t.length}})),p=s.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:v.toReversed().map((r,l)=>s.jsx(Kt,{file:r,index:l,gizmoId:e.gizmo.id},r.id))})}return s.jsx(de,{className:a,onClick:o,header:c,context:i,icon:p,disabled:n&&!h})}function Kt({file:a,index:e,gizmoId:t}){const n=a.name,o=st(n)&&a.file_id!=null&&s.jsx(Ct,{fileName:n,fileId:a.file_id,gizmoId:t,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return s.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:"translateX(".concat(e*-20,"px)")},children:o||s.jsx(It,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:a.name,contextConnectorInfo:void 0})})}function Xt({gizmo:a,className:e}){const{instructions:t}=a.gizmo,n=!t.length,m=R(),o=()=>ne(m,be,{gizmo:a});let c,i,p;const{canEdit:h}=se(a);return n?(c=s.jsx(_,I({},h?C.customInstructionsTitle:C.customInstructionsReadOnlyTitle)),i=s.jsx(_,I({},h?C.customInstructionsDescription:C.customInstructionsReadOnlyDescription))):(c=s.jsx(_,I({},C.editCustomInstructionsTitle)),p="overflow-hidden text-ellipsis whitespace-nowrap",i=t),s.jsx(de,{className:e,onClick:o,header:c,context:i,contextClassName:p,disabled:n&&!h})}const Zt=()=>s.jsx("div",{className:"ms-1 mt-3 h-10",children:s.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})});function we(a){"use forget";var f,j,x,g;const e=B.c(17),{gizmo:t}=a,n=te(),m=R(),o=P.use(Se);let c;e[0]!==t||e[1]!==o?(c=()=>t?o.theme$():null,e[0]=t,e[1]=o,e[2]=c):c=e[2];const i=ee(c);let p;e[3]!==t||e[4]!==o?(p=()=>t?o.emoji$():null,e[3]=t,e[4]=o,e[5]=p):p=e[5];const h=ee(p);let d;e[6]!==t||e[7]!==o?(d=()=>t?o.title$():null,e[6]=t,e[7]=o,e[8]=d):d=e[8];const v=ee(d),r=((g=(x=(j=(f=t==null?void 0:t.gizmo)==null?void 0:f.sharing)==null?void 0:j.subjects)==null?void 0:x.length)!=null?g:0)>0;let l;return e[9]!==m||e[10]!==h||e[11]!==i||e[12]!==v||e[13]!==t||e[14]!==n||e[15]!==r?(l=s.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:t?s.jsx("div",{className:"text-page-header mt-0.5 inline-block px-4",children:s.jsx("h1",{className:"contents",children:s.jsxs("a",{href:"#edit-title",role:"button","aria-label":n.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:t.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary ms-2 flex items-center gap-1.5 text-balance",onClick:u=>{u.preventDefault(),ne(m,Ce,{submitButtonTitle:n.formatMessage(C.projectSettingsSubmitButton),gizmo:t})},children:[s.jsx(wt,{size:"lg",color:i,emoji:h,isSharedProject:r,strict:!0}),v]})})}):s.jsx(Zt,{})}),e[9]=m,e[10]=h,e[11]=i,e[12]=v,e[13]=t,e[14]=n,e[15]=r,e[16]=l):l=e[16],l}function Vt(a){"use forget";const e=B.c(2),{children:t}=a;let n;return e[0]!==t?(n=s.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:s.jsx("div",{className:"flex items-center gap-4",children:t})}),e[0]=t,e[1]=n):n=e[1],n}const Ne=a=>{"use forget";var z,A;const e=B.c(36),{conversation:t,gizmo:n,showAvatar:m}=a,o=(z=nt(t.id,es))!=null?z:t.title,[c,i]=P.useState(!1);let p,h;e[0]!==t.id?(p=()=>at(Dt,{editTitleInMainScreen:O=>{const{serverThreadId:L}=O;L===t.id&&i(!0)}}),h=[t.id],e[0]=t.id,e[1]=p,e[2]=h):(p=e[1],h=e[2]),P.useEffect(p,h);const d=R(),{snippet:v}=t;let r,l,f,j,x;if(e[3]!==t||e[4]!==d||e[5]!==n){const O=(A=ce(d))==null?void 0:A.normalizedAccountUserId;r="owner"in t?t.owner:null,j=r==null?void 0:r.user_id,l=r==null?void 0:r.name,f=r==null?void 0:r.user_email,x=ot(t.id,n,!0,j,O),e[3]=t,e[4]=d,e[5]=n,e[6]=r,e[7]=l,e[8]=f,e[9]=j,e[10]=x}else r=e[6],l=e[7],f=e[8],j=e[9],x=e[10];const g=x;let u;e[11]!==r||e[12]!==l||e[13]!==f||e[14]!==j||e[15]!==m?(u=m&&s.jsx(zt,{monogram:r&&l&&j?{label:l,id:j,sublabel:f}:null}),e[11]=r,e[12]=l,e[13]=f,e[14]=j,e[15]=m,e[16]=u):u=e[16];let y;e[17]!==t||e[18]!==o||e[19]!==c?(y=c?s.jsx(Nt,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{i(!1)}}):s.jsx("div",{className:"text-sm font-medium",children:o}),e[17]=t,e[18]=o,e[19]=c,e[20]=y):y=e[20];let b;e[21]!==v?(b=v&&s.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:v}),e[21]=v,e[22]=b):b=e[22];let S;e[23]!==y||e[24]!==b?(S=s.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[y,b]}),e[23]=y,e[24]=b,e[25]=S):S=e[25];let w;e[26]!==t||e[27]!==c?(w=!c&&s.jsx(_e,{conversation:t}),e[26]=t,e[27]=c,e[28]=w):w=e[28];let F;e[29]!==u||e[30]!==S||e[31]!==w?(F=s.jsxs(Vt,{children:[u,S,w]}),e[29]=u,e[30]=S,e[31]=w,e[32]=F):F=e[32];const M=F;if(c)return M;let N;return e[33]!==M||e[34]!==g?(N=s.jsx(Le,{to:g,draggable:!1,children:M}),e[33]=M,e[34]=g,e[35]=N):N=e[35],N},_e=a=>{"use forget";var F,M;const e=B.c(24),{conversation:t,isNewProjectPage:n}=a,m=n===void 0?!1:n,[o,c]=P.useState(!1),i=te(),p=R(),h=(F=ce(p))==null?void 0:F.normalizedAccountUserId,d="owner"in t?(M=t.owner)==null?void 0:M.user_id:void 0,v=d===void 0||d===h;let r;e[0]!==t.update_time||e[1]!==i?(r=t.update_time&&Intl.DateTimeFormat(i.locale,{month:"short",day:"numeric"}).format(new Date(t.update_time)),e[0]=t.update_time,e[1]=i,e[2]=r):r=e[2];const l=r;if(!v){let N;return e[3]!==l?(N=l?s.jsx("span",{className:"text-token-text-tertiary text-sm whitespace-nowrap",children:l}):null,e[3]=l,e[4]=N):N=e[4],N}let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=Z("group text-token-text-tertiary relative flex min-h-10 min-w-10 items-center justify-between text-sm"),e[5]=f):f=e[5];let j;e[6]!==l||e[7]!==o||e[8]!==m?(j=!!l&&s.jsx("span",{className:Z("whitespace-nowrap",!m&&"transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:l}),e[6]=l,e[7]=o,e[8]=m,e[9]=j):j=e[9];const x=!m&&"transition-all duration-100 ease-out",g=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let u;e[10]!==x||e[11]!==g?(u=Z("absolute inset-0 flex items-center gap-1.5",x,"translate-y-0 scale-95 opacity-0","group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",g),e[10]=x,e[11]=g,e[12]=u):u=e[12];let y;e[13]!==t.id?(y=N=>{c(N),N&&ae.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},e[13]=t.id,e[14]=y):y=e[14];let b;e[15]!==t||e[16]!==y?(b=s.jsx(At,{conversation:t,onOpenChange:y,inMainScreen:!0,isActiveConversation:!1}),e[15]=t,e[16]=y,e[17]=b):b=e[17];let S;e[18]!==u||e[19]!==b?(S=s.jsx("div",{className:u,"data-prevent-default":!0,children:b}),e[18]=u,e[19]=b,e[20]=S):S=e[20];let w;return e[21]!==S||e[22]!==j?(w=s.jsxs("div",{className:f,children:[j,S]}),e[21]=S,e[22]=j,e[23]=w):w=e[23],w};function Fe(a){"use forget";const e=B.c(24),{gizmo:t,hasConversations$:n,className:m}=a;_t(t.gizmo.id);const{items:o,hasNextPage:c,fetchNextPage:i,isLoading:p,isFetching:h,isFetchingNextPage:d}=Ft(t.gizmo.id);let v,r;e[0]!==n||e[1]!==o.length?(v=()=>{n&&n.set(o.length>0)},r=[o.length,n],e[0]=n,e[1]=o.length,e[2]=v,e[3]=r):(v=e[2],r=e[3]),P.useEffect(v,r);let l;e[4]!==c||e[5]!==h||e[6]!==p||e[7]!==i?(l=b=>{if(p||b==null)return;const S=new IntersectionObserver(w=>{w[0].isIntersecting&&c&&!h&&i()});return S.observe(b),()=>{S.disconnect()}},e[4]=c,e[5]=h,e[6]=p,e[7]=i,e[8]=l):l=e[8];const f=l,j=o.length;let x;e[9]!==m?(x=Z("mt-8 mb-14 contain-inline-size",m),e[9]=m,e[10]=x):x=e[10];let g;e[11]!==j||e[12]!==t||e[13]!==c||e[14]!==f||e[15]!==p||e[16]!==o?(g=(j||p)&&s.jsx(Yt,{gizmo:t,items:o!=null?o:[],hasNextPage:c,infiniteScrollTriggerElementRef:f}),e[11]=j,e[12]=t,e[13]=c,e[14]=f,e[15]=p,e[16]=o,e[17]=g):g=e[17];let u;e[18]!==d?(u=d&&s.jsx("div",{className:"m-4 mb-5 flex justify-center",children:s.jsx(ct,{})}),e[18]=d,e[19]=u):u=e[19];let y;return e[20]!==x||e[21]!==g||e[22]!==u?(y=s.jsxs("div",{className:x,children:[g,u]}),e[20]=x,e[21]=g,e[22]=u,e[23]=y):y=e[23],y}function Yt(a){"use forget";var j,x,g,u;const e=B.c(21),{gizmo:t,items:n,hasNextPage:m,infiniteScrollTriggerElementRef:o}=a,c=R();let i;e[0]!==c?(i=dt(c,"773249106"),e[0]=c,e[1]=i):i=e[1];const p=i,h=((u=(g=(x=(j=t==null?void 0:t.gizmo)==null?void 0:j.sharing)==null?void 0:x.subjects)==null?void 0:g.length)!=null?u:0)>0;let d;if(e[2]!==t||e[3]!==n){let y;e[5]!==t?(y=b=>{var S,w;return"owner"in b&&((S=b.owner)==null?void 0:S.user_id)!==((w=t.gizmo)==null?void 0:w.author.user_id)},e[5]=t,e[6]=y):y=e[6],d=n.some(y),e[2]=t,e[3]=n,e[4]=d}else d=e[4];const r=p&&(h||d);let l;if(e[7]!==t||e[8]!==m||e[9]!==o||e[10]!==n||e[11]!==r){let y;e[13]!==t||e[14]!==m||e[15]!==o||e[16]!==n.length||e[17]!==r?(y=(b,S)=>{const w=m&&S===n.length-3?o:void 0;return s.jsx("li",{ref:w,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:s.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:s.jsx(Ne,{conversation:b,gizmo:t,showAvatar:r})})},b.id)},e[13]=t,e[14]=m,e[15]=o,e[16]=n.length,e[17]=r,e[18]=y):y=e[18],l=n.map(y),e[7]=t,e[8]=m,e[9]=o,e[10]=n,e[11]=r,e[12]=l}else l=e[12];let f;return e[19]!==l?(f=s.jsx("ol",{children:l}),e[19]=l,e[20]=f):f=e[20],f}function Me(a,e){"use forget";const t=B.c(14),n=Mt(),m=R(),o=Ue(),c=Tt(),i=Pt.useStore(),p=(n==null?void 0:n.kind)==="conversation"&&n.gizmoId!==e;let h;t[0]!==o||t[1]!==i||t[2]!==c?(h=async function(j){const{conversation:x,newGizmoId:g,previousGizmoId:u}=j;i.expandProject(g),await c({newGizmoId:g,conversation:x,previousGizmoId:u}),o("/g/".concat(g,"/project"))},t[0]=o,t[1]=i,t[2]=c,t[3]=h):h=t[3];const d=h;let v;t[4]!==d||t[5]!==p||t[6]!==m||t[7]!==n||t[8]!==e||t[9]!==a?(v=()=>{if(!p)return;const{conversation:f,gizmoId:j}=n;if(e)return d({conversation:f,newGizmoId:e,previousGizmoId:j});ne(m,x=>{const{onClose:g}=x;return s.jsx(Ce,{onClose:g,onSuccess:u=>{if(!u)return;const y=d({conversation:f,newGizmoId:u,previousGizmoId:j});return ae.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:a}),y}})})},t[4]=d,t[5]=p,t[6]=m,t[7]=n,t[8]=e,t[9]=a,t[10]=v):v=t[10];const r=v;let l;return t[11]!==p||t[12]!==r?(l={canDropConversation:p,onDropConversation:r},t[11]=p,t[12]=r,t[13]=l):l=t[13],l}function Jt(a){"use forget";var V;const e=B.c(44),{clientThreadId:t,gizmoId:n,currentModelId:m,onRequestCompletion:o}=a,c=R(),{data:i}=je(n),p=it(c),h=rt(lt),{onDropConversation:d,canDropConversation:v}=Me(void 0,n),[r,l]=P.useState(!1),f=ye();let j;e[0]!==c||e[1]!==n||e[2]!==f?(j=kt(c)(n,f),e[0]=c,e[1]=n,e[2]=f,e[3]=j):j=e[3];const x=j;let g;e[4]!==v?(g=k=>{k.preventDefault(),v&&l(!0)},e[4]=v,e[5]=g):g=e[5];let u;e[6]!==v||e[7]!==d?(u=k=>{k.preventDefault(),v&&(l(!1),d())},e[6]=v,e[7]=d,e[8]=u):u=e[8];let y,b;e[9]!==v?(y=k=>{k.preventDefault(),v&&l(!0)},b=k=>{k.preventDefault(),v&&l(!1)},e[9]=v,e[10]=y,e[11]=b):(y=e[10],b=e[11]);const S=p?"last-standard":"none",w=h?"none":"standard";let F;e[12]!==i?(F=s.jsx(we,{gizmo:i}),e[12]=i,e[13]=F):F=e[13];let M;e[14]!==t||e[15]!==m||e[16]!==i||e[17]!==o?(M=i?s.jsx($t,{clientThreadId:t,isNewThread:!0,isProjectThread:!0,currentModelId:m,layoutMode:"center",onContinueGenerating:k=>o(Ut(k)),onRequestCompletion:async k=>o(await Ot(k)),hideHeader:!0}):s.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[14]=t,e[15]=m,e[16]=i,e[17]=o,e[18]=M):M=e[18];let N,z;e[19]!==i?(N=s.jsx(qt,{gizmo:i}),z=i&&s.jsx(Fe,{gizmo:i}),e[19]=i,e[20]=N,e[21]=z):(N=e[20],z=e[21]);let A;e[22]!==(i==null?void 0:i.gizmo)||e[23]!==r?(A=r&&s.jsxs(le,{children:[s.jsx(Et,{className:"h-12 w-12",style:{color:"#3C46FF"}}),s.jsx("h3",{className:"text-center",children:s.jsx(_,$(I({},C.addConversationToNamedSnorlax),{values:{projectName:(V=i==null?void 0:i.gizmo.display.name)!=null?V:"project"}}))}),s.jsx("h4",{className:"text-center",children:s.jsx(_,I({},C.moveConversation))})]}),e[22]=i==null?void 0:i.gizmo,e[23]=r,e[24]=A):A=e[24];let O;e[25]!==N||e[26]!==z||e[27]!==A||e[28]!==F||e[29]!==M?(O=s.jsxs(Lt,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[F,M,N,z,A]}),e[25]=N,e[26]=z,e[27]=A,e[28]=F,e[29]=M,e[30]=O):O=e[30];let L;e[31]!==O||e[32]!==S||e[33]!==w?(L=s.jsx(Rt,{verticalMargin:"none",verticalPadding:S,horizontalPadding:w,children:O}),e[31]=O,e[32]=S,e[33]=w,e[34]=L):L=e[34];let H;e[35]!==L||e[36]!==g||e[37]!==u||e[38]!==y||e[39]!==b?(H=s.jsx("div",{onDragOver:g,onDrop:u,onDragEnter:y,onDragLeave:b,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:L}),e[35]=L,e[36]=g,e[37]=u,e[38]=y,e[39]=b,e[40]=H):H=e[40];let Q;return e[41]!==x||e[42]!==H?(Q=s.jsx(Se,{value:x,children:H}),e[41]=x,e[42]=H,e[43]=Q):Q=e[43],Q}function es(a){return a==null?void 0:a.title}const ds=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxConversationItem:Ne,SnorlaxConversationItemOverflowMenu:_e,SnorlaxConversationList:Fe,SnorlaxHeader:we,SnorlaxSplashScreen:Jt,useProjectsDragDrop:Me},Symbol.toStringTag,{value:"Module"}));export{_e as S,cs as a,ds as b,Me as u};
//# sourceMappingURL=kns9nvvq30b8h03q.js.map
