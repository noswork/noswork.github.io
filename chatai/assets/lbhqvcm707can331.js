import{r as _,ad as U,j as o}from"./pb09dh9fam0wt6jz.js";import{aY as Y,aZ as q,Y as D,a_ as K,a$ as Z,b0 as $,b1 as H,b2 as J}from"./8i5ljbfelmyfiwtx.js";import{f_ as V,bq as h,i as X,r as ee,gs as se,ky as oe,br as ae,gL as re,fM as ne,bp as te,j as ie,hE as le,aQ as m,mB as ce}from"./bjx6p88nrzc4ug4u.js";import{P as ue}from"./ab6duu2lw4fd88lb.js";function fe({clientThreadId:s,currentModelId:c,disableDraftPersistence:x=!1,isNewThread:M,isProjectThread:S=!1,onRequestCompletion:P,onContinueGenerating:j,headerClassName:b,hideHeader:z,onlyAllowImageUploads:w,layoutMode:A="bottom"}){const{modelsData:a,externalModelsLoading:N}=V(),[p,g,t,k,y]=h(s,e=>{var C;const n=m.getCurrentNode(e);return[((C=n.message.clientMetadata)==null?void 0:C.errType)!=null&&n.message.clientMetadata.errType!=="info",ce(m.getCurrentNode(e).message),e==null?void 0:e.mode,!!(e!=null&&e.continuingFromSharedPostId),(e==null?void 0:e.continuingFromSharedProjectConversationId)!=null]}),u=X(),i=ee(u),I=se(),r=Y({clientThreadId:s}),{isOpen:v,onClose:G}=q({type:"just-hit-rate-limit"}),L=_.useMemo(()=>r?!1:!p&&g,[p,g,r]),E=r,R=oe(s),W=h(s,m.hasRecentPIMWarning),d=ae(R).data,B=re(),l=(()=>{var n;return W?"pimBlock":((n=d==null?void 0:d.gizmo.tags)==null?void 0:n.includes(ne.WorkspaceDisabled))&&!B?"workspaceDisallowsGizmo":(a==null?void 0:a.models.size)===0?"noModelsAvailable":(t==null?void 0:t.kind)===te.GizmoTest&&t.gizmo_id==null?"noTestGizmoId":null})(),T=U(),f=D(),O=T.action==="moderate",F=ie(u,"1860647109"),Q=!K(u);return o.jsxs(o.Fragment,{children:[o.jsx(Z,{composerController:I,clientThreadId:s,currentModelId:c,isCompletionInProgress:r,expireConduit:Q}),o.jsx("div",{className:"flex justify-center empty:hidden",children:f&&O&&F?o.jsx($,{}):null}),v?o.jsx(H,{onClose:G}):null,S&&o.jsx(J,{clientThreadId:s,accountUserId:i==null?void 0:i.normalizedAccountUserId}),o.jsx(ue,{clientThreadId:s,disableDraftPersistence:x,onCreateNewCompletion:P,onContinueGenerating:j,currentModelId:c,account:i,currentModelConfig:le(a==null?void 0:a.models,c),areModelsLoading:N,isNewThread:M,isCompletionInProgress:r,className:"w-full",canContinue:L,disabled:!!l,disabledReason:l!=null?l:void 0,canPause:E,isInteractableSharedThread:f||k||y,headerClassName:b,hideHeader:z,onlyAllowImageUploads:w,layoutMode:A,modelsData:a},s)]})}export{fe as P};
//# sourceMappingURL=lbhqvcm707can331.js.map
