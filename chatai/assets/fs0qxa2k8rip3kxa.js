var K=Object.freeze,V=Object.defineProperty,be=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var Q=(s,e,o)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,U=(s,e)=>{for(var o in e||(e={}))ve.call(e,o)&&Q(s,o,e[o]);if(J)for(var o of J(e))Pe.call(e,o)&&Q(s,o,e[o]);return s},ee=(s,e)=>be(s,Me(e));var te=(s,e)=>K(V(s,"raw",{value:K(e||s.slice())}));import{d as ce,b as de,j as l,M as w,c as ue}from"./pb09dh9fam0wt6jz.js";import{P as W,l8 as ge,i as Y,ed as B,T as Ae,oH as je,F as ye,b_ as fe,f as pe,gf as _e,ab as Ue,is as me,oI as he,oJ as Fe,oK as Le,gc as $,y as Te,fd as ke,ga as Ee,lE as Ce,gt as De,aN as Ie,gb as se,ko as Ne,oL as Re,oM as Oe,oN as ze,oO as Se,jq as oe,jp as q}from"./bjx6p88nrzc4ug4u.js";import{el as ae,em as Be,en as $e,eo as He,ep as le,eq as Xe,er as qe,es as we,et as We}from"./8i5ljbfelmyfiwtx.js";import{u as Ye}from"./nzmrf34k5gq1uhrp.js";function lt({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:n=!1,isSmall:u=!1,showLabel:a=!1,showUpsell:r=!1,hideBorder:t=!1,highlightTooltip:g=!1,disabledReason:c,currentModelName:F,visualTreatment:b,showMenuForNoAuth:d,modelSupportsImages:x}){const i=de(),f=ge(),p=Y();n=(n||!!f)&&!r;const m=l.jsxs(Be,{disabled:n,$showLabel:a,$hideBorder:t,$isSmall:u,$visualTreatment:b,onClick:v=>{if(v.preventDefault(),d||r){W.logNoAuthAttachButtonClicked({location:d?"No auth file upload":"No auth upsell"});return}e()},"aria-label":$e(p,i,n,c,F),children:[o,a&&l.jsx(He,{})]}),M=l.jsx("div",{className:"flex",children:m});if(d||r){const v=d?l.jsx(Xe,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:x}):l.jsx(je,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),h=l.jsx(B.BasicTrigger,{asChild:!0,children:M});return l.jsxs(B.Root,{children:[d?l.jsx(le,{clientThreadId:s,rateLimitPopup:f,highlightTooltip:g,disabled:n,children:h}):l.jsx(Ae,{label:l.jsx(w,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:g||void 0,children:h}),l.jsx(B.Portal,{children:l.jsx(B.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:v})})]})}return l.jsx(le,{disabled:n,clientThreadId:s,rateLimitPopup:f,highlightTooltip:g,children:M})}function Ze({code:s,message:e}){switch(s){case ae.FileTooLarge:return ie.errorFileTooLarge;case ae.TooManyFiles:return W.logEvent("Uploaded Max Files Error"),ie.errorTooManyFiles;default:return e}}const ie=ce({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),re=ce({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Ge(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function it(s){"use forget";var G;const e=ue.c(48),{className:o,children:n,clientThreadId:u,currentModelConfig:a,noKeyboard:r}=s,t=de(),g=pe(),c=Y();let F;e[0]!==c?(F=Te(c),e[0]=c,e[1]=F):F=e[1];const b=F;let d;if(e[2]!==c){const j=fe(c).flags;d=j==null?void 0:j.includes(me.NoAuthEnableFileUploads),e[2]=c,e[3]=d}else d=e[3];const x=d,i=we(u),f=ke();let p;e[4]!==f||e[5]!==i||e[6]!==a?(p=Ee(a,i,f),e[4]=f,e[5]=i,e[6]=a,e[7]=p):p=e[7];const m=p,M=m!==$.None,v=Ce(Ke),h=(m===$.Multimodal?he:Fe)-v.length,N=h<=0,{getGizmoId:Z}=De();let L;e[8]!==u||e[9]!==c?(L=Se(c,u),e[8]=u,e[9]=c,e[10]=L):L=e[10];const P=Ie(L),R=Array.isArray(P)&&P.length>0;let y;e[11]!==i||e[12]!==a?(y=se(a,i),e[11]=i,e[12]=a,e[13]=y):y=e[13];let _;e[14]!==i||e[15]!==a?(_=(G=Ne(a,i))==null?void 0:G.attachments,e[14]=i,e[15]=a,e[16]=_):_=e[16];const{handleFileAccepted:T}=Qe(t,m,y,"drag",Z,_,R?P:void 0),xe=ge();let O;e[17]!==i||e[18]!==a||e[19]!==b||e[20]!==x?(O=!b&&x?se(a,i):Re(a,i),e[17]=i,e[18]=a,e[19]=b,e[20]=x,e[21]=O):O=e[21];const k=Oe(O),H=!M||N||xe!=null;let E;e[22]!==t||e[23]!==g||e[24]!==m?(E=j=>Je(j,t,g,m),e[22]=t,e[23]=g,e[24]=m,e[25]=E):E=e[25];let z;e[26]!==k||e[27]!==T||e[28]!==r||e[29]!==h||e[30]!==H||e[31]!==E?(z=U({maxFiles:h,disabled:H,noClick:!0,noKeyboard:r,onDropAccepted:T,onDropRejected:E,multiple:!0,maxSize:ze},k),e[26]=k,e[27]=T,e[28]=r,e[29]=h,e[30]=H,e[31]=E,e[32]=z):z=e[32];const{getRootProps:I,isDragActive:X}=Ye(z);let A,C,D;if(e[33]!==n||e[34]!==o||e[35]!==k||e[36]!==I||e[37]!==X){const j=Ge(k);e[41]!==o||e[42]!==I?(A=I({className:o}),e[41]=o,e[42]=I,e[43]=A):A=e[43],C=n,D=X&&l.jsxs(Ve,{children:[l.jsx(We,{}),l.jsx("h3",{children:l.jsx(w,U({},re.dragInstructions))}),l.jsx("h4",{className:"w-2/3 text-center",children:j.length>0?j.join(", "):l.jsx(w,U({},re.dragAllAccepted))})]}),e[33]=n,e[34]=o,e[35]=k,e[36]=I,e[37]=X,e[38]=A,e[39]=C,e[40]=D}else A=e[38],C=e[39],D=e[40];let S;return e[44]!==A||e[45]!==C||e[46]!==D?(S=l.jsxs("div",ee(U({},A),{children:[C,D]})),e[44]=A,e[45]=C,e[46]=D,e[47]=S):S=e[47],S}function Ke(s){return s.files}function Je(s,e,o,n){const{errors:u}=s[0];u.forEach(a=>{const r=Ze(a);typeof r=="string"?o.danger(r,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:r,toastId:"file_upload_error"}):o.danger(e.formatMessage(r,{size:Le,maxNum:n===$.Multimodal?he:Fe}),{hasCloseButton:!0,loggingTitle:r.defaultMessage||"File upload error",loggingDescription:r.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function Qe(s,e,o,n,u,a,r){"use forget";const t=ue.c(18),g=Y(),c=fe(g).flags,F=pe(),b=_e(),{isUnauthenticated:d}=Ue(),x=r!=null?r:void 0,i=c==null?void 0:c.includes(me.NoAuthEnableFileUploads);let f;t[0]!==g?(f=qe(g,!0),t[0]=g,t[1]=f):f=t[1];const{persistFilesToLibrary:p,doubleWriteFilesToLibrary:m}=f;let M;t[2]!==a||t[3]!==x||t[4]!==u||t[5]!==s||t[6]!==m||t[7]!==p||t[8]!==d||t[9]!==o||t[10]!==i||t[11]!==b||t[12]!==F||t[13]!==n||t[14]!==e?(M=async(N,Z)=>{W.logEvent("Upload File",{client:"web",eventSource:n,intent:e.toString()});const L=u!=null?await u():void 0;N.length>0&&N.forEach(P=>{const R=U(U({gizmoId:L},i&&{isUnauthenticated:d}),x&&x.length>0?{contextScopes:x}:{}),y=[b,oe(P),P,e,o,s,F,R,a];if(e===$.Retrieval){let _=Promise.resolve(),T=Promise.resolve();p&&(T=q.uploadFile(b,"".concat(oe(P),":lib"),P,e,o,s,F,R,a,void 0,!0,!0)),(m||!p)&&(_=q.uploadFile(...y,void 0,!1,p)),Promise.all([_,T])}else q.uploadFile(...y)})},t[2]=a,t[3]=x,t[4]=u,t[5]=s,t[6]=m,t[7]=p,t[8]=d,t[9]=o,t[10]=i,t[11]=b,t[12]=F,t[13]=n,t[14]=e,t[15]=M):M=t[15];const v=M;let h;return t[16]!==v?(h={handleFileAccepted:v},t[16]=v,t[17]=h):h=t[17],h}var ne;const Ve=ye.div(ne||(ne=te(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{Ve as D,it as F,lt as P,Ge as g,Je as h,Qe as u};
//# sourceMappingURL=fs0qxa2k8rip3kxa.js.map
