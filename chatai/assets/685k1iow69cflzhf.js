var X=Object.defineProperty;var U=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var I=(a,s,n)=>s in a?X(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,j=(a,s)=>{for(var n in s||(s={}))Y.call(s,n)&&I(a,n,s[n]);if(U)for(var n of U(s))$.call(s,n)&&I(a,n,s[n]);return a};import{b as N,r as Z,j as e,d as ee,M}from"./pb09dh9fam0wt6jz.js";import{i as B,aO as se,fv as ae,q as z,bq as ne,aN as te,c3 as oe,X as ie,Y as re,fw as ce,V as le,fS as ue,y as p,B as x,cO as D,T as P,al as de,a9 as ge,af as he,nJ as me,e as S,aa as k,P as y,m4 as pe,ab as xe,nK as Se,aQ as T}from"./bjx6p88nrzc4ug4u.js";import{k as fe,l as ve,m as be,o as Ce,p as je,q as Me,t as ke,w as F,N as O,x as ye,y as Ne,O as Be,G as Pe,H as Oe,P as H,z as _e,A as we,B as Le,D as Ee,E as Ae,F as Ue,I as Ie,J as Te}from"./8i5ljbfelmyfiwtx.js";import{P as Fe}from"./dr3zqlogoqaz93js.js";function Qe({showShareButton:a,showProfileDropdown:s,showConversationPrivacyIndicator:n,clientThreadId:o}){const i=B(),h=se(i,o),c=ae(o),u=N(),f=z(i,"1547743984"),[v,r,b,d,m,g,l]=ne(o,t=>[T.hasUserMessage(t),T.getGizmoId(t),Te(t),t==null?void 0:t.title,t==null?void 0:t.is_do_not_remember,t==null?void 0:t.isStarred,t==null?void 0:t.continuingFromSharedProjectConversationId]),_=te(()=>{var t;return(t=fe(h))==null?void 0:t.value}),G=Z.useMemo(()=>ve({clientThreadId:o,gizmoId:r,conversationTitle:d,conversationAsyncStatus:_,isDoNotRemember:m,isStarred:g}),[o,r,d,_,m,g]),R=oe(o),{prefetchSearchPromises:q}=be(),W=q!=null,w=ie(re),K=f.get("show_share_button_text",!1)&&!w,L=u.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),V=ce(r),C=le();ue();const E=!p(i),{shouldShowProjectsChatShareModal:J,openProjectsChatShareModal:Q}=Ce({clientThreadId:o}),A=()=>J?Q():D.openSharingModal(c);return e.jsxs(e.Fragment,{children:[p(i)?e.jsx(je,{}):null,p(i)&&(C==null?void 0:C.includes("caterpillar"))&&e.jsx(Me,{}),null,r&&V&&e.jsx(ke,{gizmoId:r,serverThreadId:c!=null?c:l}),a&&(c||l)&&e.jsx(e.Fragment,{children:K?e.jsx(x,{onClick:A,icon:F,label:L,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary mx-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:L}):e.jsx(P,{label:u.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(O,{"data-testid":"share-chat-button",onClick:A,icon:F,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),e.jsxs("div",{className:"flex items-center",children:[!E&&!r&&R&&!W&&!v&&!w&&e.jsx(e.Fragment,{children:e.jsx(ye,{clientThreadId:o})}),n&&e.jsx("div",{className:"me-2",children:e.jsx(Ne,{clientThreadId:o,gizmoId:r})}),e.jsx(Be,{}),c!=null&&!E&&e.jsx(Pe,{conversation:G,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(Oe,{"aria-label":u.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}),s&&e.jsx(He,{clientThreadId:o})]})]})}const He=({clientThreadId:a})=>{const s=B(),n=de();return H.markStart("LoginOrProfileMenu"),H.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!n&&!p(s)&&e.jsx(Ge,{}),!n&&e.jsx(Fe,{clientThreadId:a})]})};function ze({onClick:a,className:s,testId:n}){const i=N().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(P,{label:i,className:S("flex",s),children:e.jsx(O,{onClick:h=>Ie(h,a),icon:Ue,"aria-label":i,"data-testid":n,as:"link"})})}function Xe({clientThreadId:a,hideNewChat:s=!1}){const n=Ae({clientThreadId:a,location:"Navigation actions"});return Se()?e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{}),!s&&e.jsx(ze,{onClick:n})]}):null}function De(){const a=N(),s=pe(),{isUnauthenticated:n}=xe(),o=we(Ee,Le,!1,!0);return n||s?null:e.jsx(P,{label:a.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(O,{"aria-label":a.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{D.setSidebarOpen(!0)},icon:o})})}function Ge(){const a=B(),s=ge(),n=_e(),o=he(Re.signUpCta),i=me(),c=z(a,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),u="Chat header",f=()=>{k(a,{fallbackScreenHint:"login",callback:l=>{y.logLogInButtonClicked({location:u,provider:l})}})},v=()=>{k(a,{fallbackScreenHint:"signup",callback:l=>{y.logSignUpButtonClicked({location:u,provider:l})}})},r=()=>{k(a,{fallbackScreenHint:"login_or_signup",callback:l=>{y.logLoginOrSignUpButtonClicked({location:u,provider:l})}})},b=e.jsx(x,{onClick:f,color:s?"primary":"secondary","data-testid":"login-button",className:S(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),d=e.jsx(x,{color:s?"secondary":"primary",onClick:v,"data-testid":"signup-button",className:S(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,j({},o))},"signup"),m=e.jsx(x,{color:"primary",onClick:r,"data-testid":"login-or-signup-button",className:S(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,j({},i))},"signup"),g=n?[m]:s?[b,d]:[d,b];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:c?g.reverse():g})}const Re=ee({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Qe as C,De as E,He as L,Xe as N,Ge as a,ze as b};
//# sourceMappingURL=685k1iow69cflzhf.js.map
