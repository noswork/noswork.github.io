// Shared translations for NOS Maze UI elements.
// Exposed globally as `window.MAZE_TRANSLATIONS` so both the main menu
// and game page can reuse the same vocabulary.

(function () {
    window.MAZE_TRANSLATIONS = {
        zh: {
            'tab.justMaze': 'ç¶“å…¸è¿·å®®',
            'tab.faultless': 'å®Œç¾æŒ‘æˆ°',
            'tab.race': 'ç«¶é€Ÿæ¨¡å¼',
            'tab.dark': 'é»‘æš—è¿·å®®',
            'desc.justMaze': 'ç´”ç²¹çš„è¿·å®®é«”é©—ï¼Œé©åˆæƒ³è¦æ”¾é¬†æˆ–å°å°æŒ‘æˆ°çš„äººã€‚',
            'desc.faultless': 'å®Œç¾é€šé—œæŒ‘æˆ°ï¼ä¸èƒ½å›é ­ï¼Œä¸èƒ½æ’ç‰†ï¼Œä¸€æ¬¡å¤±èª¤å°±å¾—é‡æ–°é–‹å§‹ã€‚æ¯”ä½ æƒ³åƒçš„æ›´é›£ã€‚',
            'desc.race': 'æŒ‘æˆ°å®ŒæˆæŒ‡å®šæ•¸é‡çš„è¿·å®®ï¼Œçœ‹çœ‹ä½ èƒ½å¤šå¿«å®Œæˆï¼',
            'desc.dark': 'åœ¨é»‘æš—ä¸­æ¢ç´¢è¿·å®®ï¼Œåªèƒ½çœ‹è¦‹ä¸€å°å¡Šå€åŸŸã€‚è€ƒé©—ä½ çš„è¨˜æ†¶åŠ›å’Œæ–¹å‘æ„Ÿï¼',
            'race.classic': 'ç¶“å…¸æ¨¡å¼',
            'race.dark': 'é»‘æš—æ¨¡å¼',
            'race.mazes': 'å€‹è¿·å®®',
            'dark.single': 'å–®ä¸€è¿·å®®',
            'size.mini': 'å°å‹è¿·å®®',
            'size.medium': 'ä¸­å‹è¿·å®®',
            'size.mighty': 'å¤§å‹è¿·å®®',
            'size.mega': 'è¶…å¤§è¿·å®®',
            'size.teensy': 'å¾®å‹',
            'size.faultlessMini': 'å®Œç¾å°å‹',
            'size.faultlessMedium': 'å®Œç¾ä¸­å‹',
            'size.faultlessMighty': 'å®Œç¾å¤§å‹',
            'nav.leaderboard': 'æ’è¡Œæ¦œ',
            'leaderboard.title': 'ç«¶é€Ÿæ¨¡å¼æ’è¡Œæ¦œ',
            'leaderboard.tooltip.rulesTitle': 'è¦å‰‡',
            'leaderboard.tooltip.rule1': 'â±ï¸ å„ªå…ˆä»¥å®Œæˆæ™‚é–“æ’åº',
            'leaderboard.tooltip.rule2': 'ğŸ‘£ æ™‚é–“ç›¸åŒæ™‚ä»¥æ­¥æ•¸æ±ºå‹',
            'leaderboard.tooltip.rule3': 'ğŸ† æ¯å€‹é …ç›®é¡¯ç¤ºå‰ 50 å',
            'leaderboard.tooltip.requirementsTitle': 'åƒè³½æ¢ä»¶',
            'leaderboard.tooltip.requirement1': 'ğŸ” éœ€ç™»å…¥æ‰èƒ½è¨˜éŒ„æˆç¸¾',
            'leaderboard.tooltip.requirement2': 'âœ¨ åªä¿ç•™å€‹äººæœ€ä½³ç´€éŒ„',
            'leaderboard.modeLabel': 'éŠæˆ²æ¨¡å¼',
            'leaderboard.mode.race': 'ç¶“å…¸ç«¶é€Ÿ',
            'leaderboard.mode.dark': 'é»‘æš—ç«¶é€Ÿ',
            'leaderboard.sizeLabel': 'è¿·å®®å¤§å°',
            'leaderboard.countLabel': 'è¿·å®®æ•¸é‡',
            'leaderboard.loading': 'æ’è¡Œæ¦œè¼‰å…¥ä¸­â€¦',
            'leaderboard.error': 'æš«æ™‚ç„¡æ³•è¼‰å…¥æ’è¡Œæ¦œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚',
            'leaderboard.empty': 'ç›®å‰é‚„æ²’æœ‰ä»»ä½•ç´€éŒ„ï¼Œæˆç‚ºç¬¬ä¸€å€‹ç· é€ ç´€éŒ„çš„ç©å®¶å§ï¼',
            'leaderboard.columns.rank': 'æ’å',
            'leaderboard.columns.player': 'ç©å®¶',
            'leaderboard.columns.time': 'æ™‚é–“',
            'leaderboard.columns.steps': 'æ­¥æ•¸',
            'leaderboard.columns.date': 'å®Œæˆæ™‚é–“',
            'leaderboard.back': 'è¿”å›ä¸»é¸å–®',
            'leaderboard.highlightLabel': 'ä½ ',
            'settings.title': 'è¨­å®š',
            'settings.language': 'èªè¨€',
            'settings.theme': 'ä¸»é¡Œ',
            'settings.close': 'é—œé–‰',
            'theme.light': 'æ˜äº®',
            'theme.dark': 'æš—é»‘',
            'theme.system': 'ç³»çµ±',
            'auth.login': 'ç™»å…¥',
            'auth.logout': 'ç™»å‡º',
            'auth.signInTab': 'ç™»å…¥',
            'auth.signUpTab': 'è¨»å†Š',
            'auth.emailLabel': 'é›»å­éƒµä»¶',
            'auth.passwordLabel': 'å¯†ç¢¼',
            'auth.confirmPasswordLabel': 'ç¢ºèªå¯†ç¢¼',
            'auth.emailPlaceholder': 'you@example.com',
            'auth.passwordPlaceholder': 'è«‹è¼¸å…¥è‡³å°‘ 6 ç¢¼å¯†ç¢¼',
            'auth.confirmPasswordPlaceholder': 'å†æ¬¡è¼¸å…¥å¯†ç¢¼',
            'auth.usernameLabel': 'ä½¿ç”¨è€…åç¨±',
            'auth.usernamePlaceholder': 'ç©å®¶åç¨±',
            'auth.accountCreated': 'å¸³è™Ÿå»ºç«‹æˆåŠŸï¼è«‹ç™»å…¥ã€‚',
            'auth.passwordMismatch': 'å…©æ¬¡è¼¸å…¥çš„å¯†ç¢¼ä¸ä¸€è‡´ï¼Œè«‹é‡æ–°ç¢ºèªã€‚',
            'auth.passwordStrengthWeak': 'å¯†ç¢¼å¼·åº¦ï¼šå¼±',
            'auth.passwordStrengthMedium': 'å¯†ç¢¼å¼·åº¦ï¼šä¸­',
            'auth.passwordStrengthStrong': 'å¯†ç¢¼å¼·åº¦ï¼šå¼·',
            'auth.signIn': 'ç™»å…¥',
            'auth.signUp': 'å»ºç«‹å¸³è™Ÿ',
            'auth.usernameRequired': 'è«‹è¼¸å…¥è‡³å°‘ 2 å€‹å­—å…ƒçš„é¡¯ç¤ºåç¨±ã€‚',
            'auth.needAccount': 'é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿç«‹å³è¨»å†Š',
            'auth.haveAccount': 'å·²ç¶“æœ‰å¸³è™Ÿï¼Ÿç«‹å³ç™»å…¥',
            'auth.modalTitleSignin': 'æ­¡è¿å›ä¾†',
            'auth.modalTitleSignup': 'å»ºç«‹æ–°å¸³è™Ÿ',
            'auth.signingIn': 'ç™»å…¥ä¸­â€¦â€¦',
            'auth.creatingAccount': 'å»ºç«‹å¸³è™Ÿä¸­â€¦â€¦',
            'auth.signedIn': 'ç™»å…¥æˆåŠŸï¼',
            'auth.confirmEmail': 'è«‹è‡³ä¿¡ç®±æ”¶ä¿¡ä¸¦å®Œæˆé©—è­‰ã€‚',
            'auth.requireSignIn': 'è«‹å…ˆç™»å…¥ä»¥é–‹å§‹éŠæˆ²ã€‚',
            'auth.close': 'é—œé–‰',
            'auth.usernameTaken': 'é¡¯ç¤ºåç¨±å·²ç¶“è¢«ä½¿ç”¨ã€‚',
            'auth.usernameCheckFailed': 'ç›®å‰ç„¡æ³•ç¢ºèªé¡¯ç¤ºåç¨±æ˜¯å¦å¯ç”¨ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚',
            'auth.emailAlreadyRegistered': 'é€™å€‹é›»å­éƒµä»¶å·²ç¶“è¨»å†Šéäº†ã€‚',
            'auth.emailNotConfirmed': 'è«‹å…ˆå®Œæˆé›»å­éƒµä»¶é©—è­‰å¾Œå†ç™»å…¥ã€‚',
            'auth.invalidCredentials': 'ä½¿ç”¨è€…åç¨±æˆ–å¯†ç¢¼ä¸æ­£ç¢ºã€‚',
            'auth.networkError': 'ç¶²è·¯é€£ç·šç•°å¸¸ï¼Œè«‹æª¢æŸ¥å¾Œå†è©¦ä¸€æ¬¡ã€‚',
            'auth.rateLimited': 'æ“ä½œå¤ªé »ç¹ï¼Œè«‹ç¨å€™å†è©¦ã€‚',
            'auth.genericSignUpError': 'è¨»å†Šæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚',
            'auth.genericSignInError': 'ç™»å…¥æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚',
            'game.leaderboardSaved': 'æˆç¸¾å·²è¨˜éŒ„åœ¨æ’è¡Œæ¦œï¼',
            'game.leaderboardSaveFailed': 'ç„¡æ³•å„²å­˜æ’è¡Œæ¦œæˆç¸¾ã€‚',
            'game.personalBestSaved': 'åˆ·æ–°å€‹äººç´€éŒ„ï¼',
            'game.leaderboardNoImprovement': 'æœ¬æ¬¡æˆç¸¾æ²’æœ‰è¶…è¶Šä½ çš„æœ€ä½³ç´€éŒ„ã€‚',
            'game.sessionStartFailed': 'ç„¡æ³•å»ºç«‹æŒ‘æˆ°æœƒè©±ï¼Œæˆç¸¾ä¸æœƒè¢«è¨˜éŒ„ã€‚',
            'game.sessionCompleteFailed': 'ç„¡æ³•é©—è­‰æŒ‘æˆ°æˆç¸¾ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚',
            'game.sessionMissing': 'æ²’æœ‰æœ‰æ•ˆçš„æŒ‘æˆ°æœƒè©±ï¼Œç„¡æ³•å„²å­˜æˆç¸¾ã€‚'
        },
        en: {
            'tab.justMaze': 'Just Maze',
            'tab.faultless': 'Faultless',
            'tab.race': 'Race Clock',
            'tab.dark': 'Dark Maze',
            'desc.justMaze': 'Straight up mazes for those who want to lose themselves with no stress, or at least a little stress.',
            'desc.faultless': "Complete the maze with no backtracking or wall hitting allowed. One mistake sends you back to start. It's harder than you think.",
            'desc.race': 'Challenge yourself to complete a set number of mazes as fast as you can!',
            'desc.dark': 'Explore the maze in darkness with limited visibility. Test your memory and sense of direction!',
            'race.classic': 'Classic Mode',
            'race.dark': 'Dark Mode',
            'race.mazes': 'mazes',
            'dark.single': 'Single Maze',
            'size.mini': 'Mini Maze',
            'size.medium': 'Medium Maze',
            'size.mighty': 'Mighty Maze',
            'size.mega': 'Mega Maze',
            'size.teensy': 'Teensy',
            'size.faultlessMini': 'Faultless Mini',
            'size.faultlessMedium': 'Faultless Medium',
            'size.faultlessMighty': 'Faultless Mighty',
            'nav.leaderboard': 'Leaderboard',
            'leaderboard.title': 'Race Mode Leaderboard',
            'leaderboard.tooltip.rulesTitle': 'Rules',
            'leaderboard.tooltip.rule1': 'â±ï¸ Sorted by completion time',
            'leaderboard.tooltip.rule2': 'ğŸ‘£ Steps as tiebreaker',
            'leaderboard.tooltip.rule3': 'ğŸ† Top 50 per category',
            'leaderboard.tooltip.requirementsTitle': 'Requirements',
            'leaderboard.tooltip.requirement1': 'ğŸ” Sign in to record scores',
            'leaderboard.tooltip.requirement2': 'âœ¨ Only best scores saved',
            'leaderboard.modeLabel': 'Game Mode',
            'leaderboard.mode.race': 'Classic Race',
            'leaderboard.mode.dark': 'Dark Race',
            'leaderboard.sizeLabel': 'Maze Size',
            'leaderboard.countLabel': 'Maze Count',
            'leaderboard.loading': 'Loading leaderboardâ€¦',
            'leaderboard.error': 'Unable to load leaderboard right now. Please try again later.',
            'leaderboard.empty': 'No records yet. Be the first to set one!',
            'leaderboard.columns.rank': 'Rank',
            'leaderboard.columns.player': 'Player',
            'leaderboard.columns.time': 'Time',
            'leaderboard.columns.steps': 'Steps',
            'leaderboard.columns.date': 'Completed',
            'leaderboard.back': 'Back to Menu',
            'leaderboard.highlightLabel': 'You',
            'settings.title': 'Settings',
            'settings.language': 'Language',
            'settings.theme': 'Theme',
            'settings.close': 'Close',
            'theme.light': 'Light',
            'theme.dark': 'Dark',
            'theme.system': 'System',
            'auth.login': 'Sign In',
            'auth.logout': 'Sign Out',
            'auth.signInTab': 'Sign In',
            'auth.signUpTab': 'Sign Up',
            'auth.emailLabel': 'Email',
            'auth.passwordLabel': 'Password',
            'auth.confirmPasswordLabel': 'Confirm Password',
            'auth.emailPlaceholder': 'you@example.com',
            'auth.passwordPlaceholder': 'Enter at least 6 characters',
            'auth.confirmPasswordPlaceholder': 'Re-enter password',
            'auth.usernameLabel': 'Username',
            'auth.usernamePlaceholder': 'Player name',
            'auth.accountCreated': 'Account created! Please sign in.',
            'auth.passwordMismatch': 'Passwords do not match. Please check and try again.',
            'auth.passwordStrengthWeak': 'Password Strength: Weak',
            'auth.passwordStrengthMedium': 'Password Strength: Medium',
            'auth.passwordStrengthStrong': 'Password Strength: Strong',
            'auth.signIn': 'Sign In',
            'auth.signUp': 'Create Account',
            'auth.usernameRequired': 'Display name must be at least 2 characters.',
            'auth.needAccount': 'Need an account? Sign up',
            'auth.haveAccount': 'Already have an account? Sign in',
            'auth.modalTitleSignin': 'Welcome Back',
            'auth.modalTitleSignup': 'Create Account',
            'auth.signingIn': 'Signing inâ€¦',
            'auth.creatingAccount': 'Creating accountâ€¦',
            'auth.signedIn': 'Signed in successfully!',
            'auth.confirmEmail': 'Check your inbox to confirm the email.',
            'auth.requireSignIn': 'Please sign in to play.',
            'auth.close': 'Close',
            'auth.usernameTaken': 'That display name is already taken.',
            'auth.usernameCheckFailed': 'We canâ€™t verify the display name right now. Please try again later.',
            'auth.emailAlreadyRegistered': 'This email is already registered.',
            'auth.emailNotConfirmed': 'Please confirm your email before signing in.',
            'auth.invalidCredentials': 'Incorrect username or password.',
            'auth.networkError': 'Network connection issue. Please check and try again.',
            'auth.rateLimited': 'Too many attempts. Please slow down and try again later.',
            'auth.genericSignUpError': 'Something went wrong while signing up. Please try again.',
            'auth.genericSignInError': 'Something went wrong while signing in. Please try again.',
            'game.leaderboardSaved': 'Result saved to the leaderboard!',
            'game.leaderboardSaveFailed': 'Could not save leaderboard result.',
            'game.personalBestSaved': 'New personal best!',
            'game.leaderboardNoImprovement': 'This run did not beat your best record yet.',
            'game.sessionStartFailed': 'Could not start a verified race session, your score will not be recorded.',
            'game.sessionCompleteFailed': 'Could not verify the race result. Please try again.',
            'game.sessionMissing': 'No active race session; result cannot be saved.'
        }
    };

    window.getMazeTranslation = function (lang, key) {
        return window.MAZE_TRANSLATIONS?.[lang]?.[key] ?? key;
    };
    
    // ç«‹å³æ‡‰ç”¨é è¼‰çš„èªè¨€è¨­å®šï¼Œé˜²æ­¢èªè¨€é–ƒçˆ
    window.applyTranslationsImmediately = function() {
        const lang = window.__MAZE_PRELOAD_LANG__ || localStorage.getItem('maze-lang') || 'zh';
        
        // æ›´æ–°æ‰€æœ‰å¸¶æœ‰ data-i18n çš„å…ƒç´ 
        document.querySelectorAll('[data-i18n]').forEach((element) => {
            const key = element.dataset.i18n;
            if (key) {
                element.textContent = window.getMazeTranslation(lang, key);
            }
        });
        
        // æ›´æ–°æ‰€æœ‰å¸¶æœ‰ data-i18n-placeholder çš„å…ƒç´ 
        document.querySelectorAll('[data-i18n-placeholder]').forEach((element) => {
            const key = element.dataset.i18nPlaceholder;
            if (key) {
                element.placeholder = window.getMazeTranslation(lang, key);
            }
        });
    };
    
    // åœ¨ DOM æº–å‚™å¥½æ™‚ç«‹å³æ‡‰ç”¨ç¿»è­¯
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', window.applyTranslationsImmediately);
    } else {
        window.applyTranslationsImmediately();
    }
})();


