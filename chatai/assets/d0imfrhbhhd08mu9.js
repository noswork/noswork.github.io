var pe=Object.defineProperty,he=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var H=(n,e,a)=>e in n?pe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,h=(n,e)=>{for(var a in e||(e={}))Ce.call(e,a)&&H(n,a,e[a]);if(q)for(var a of q(e))xe.call(e,a)&&H(n,a,e[a]);return n},P=(n,e)=>he(n,fe(e));import{b as k,g as Me,r as v,j as t,d as Q,M,c as Z}from"./pb09dh9fam0wt6jz.js";import{d9 as be,L as N,p as I,P as V,am as z,iy as Te,w as Se,kv as ee,h2 as ye,h0 as Pe,g_ as ve,gY as _e,f as je,oP as Ne,hP as Ie,i as Re,j as K,oQ as Oe,C as Ee,oR as j,I as ke,s as E,h7 as we,B as Fe,_ as De,e as $,oS as Ae,k as W}from"./bjx6p88nrzc4ug4u.js";import{bs as Le,br as te,eu as Be,ev as Ue,ao as Ge,ew as oe,ex as Ye,ey as qe,ez as He,eA as Ve,eB as ze,eC as Ke,eD as $e,eE as We,eF as Je,eG as Xe,eH as Qe,eI as Ze,bh as et,eJ as tt,eK as ot,a3 as nt}from"./8i5ljbfelmyfiwtx.js";import{u as rt}from"./e8dm0mb6drcqj6ac.js";import{u as at}from"./nzmrf34k5gq1uhrp.js";const ne=Le.hasDismissedPromoRedemption,R="month",re="year",ae="hour";function st(n){return n==="chatgptplusplan"?"Plus":n==="chatgptgoplan"?"Go":(Se.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:n}),"Plus")}function Mt(){const{eligible:n}=te(ne);return N.getItem(I.PromoCode)?n:!1}function bt(){const n=k(),{markAsViewed:e}=te(ne),a=Me(),c=be(),{initialBillingDetails:r}=rt(c,!0),l=N.getItem(I.PromoCode),{promoMetadata:i}=Be(l),d=i!=null&&!i.schedule,C=(i==null?void 0:i.plan_name)&&st(i.plan_name)||"";if(v.useEffect(()=>{d&&(V.logEvent("Promo Redemption Banner Shown",{promoCode:l}),z.logEvent("chatgpt_promo_redemption_banner_shown"))},[d,l]),!d)return null;const g=i.plan_name==="chatgptgoplan"?Ue():Ge(),f=it(n,r,i,g,C),u=lt(n,r,i,g),p=t.jsxs("div",{className:"grow",children:[t.jsx("div",{className:"mb-0.5 font-semibold",children:f}),t.jsx("span",{className:"text-token-text-secondary",children:u})]});return t.jsx(Te,{onPrimaryCtaClick:()=>{const x=N.getItem(I.PromoCode);N.removeItem(I.PromoCode),e(),a("/p/".concat(x,"#pricing")),V.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:x}),z.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:n.formatMessage(S.bannerPrimaryCta),onDismiss:e,content:p})}function ct({billingDetails:n,planName:e}){const a=n.currency;let c;switch(a){case _e:c=e==="chatgptgoplan"?Je:Xe;break;case ve:c=e==="chatgptgoplan"?$e:We;break;case Pe:c=e==="chatgptgoplan"?ze:Ke;break;case ye:c=e==="chatgptgoplan"?He:Ve;break;default:c=e==="chatgptgoplan"?Ye:qe}return c}function se(n,e){const{discount:a}=e;let c=ct({billingDetails:n,planName:e.plan_name});if("percentage"in a){const r=(a==null?void 0:a.percentage)/100;c=c*(1-r)}else if("value"in a){const r=a==null?void 0:a.value;c-=r}return c}function it(n,e,a,c,r){var f,u;const{discount:l,duration:i}=a,{currencySymbol:d}=oe(c,e.currency),C=i?i.period:R,g=i?i.num_periods:1;if("percentage"in l){const p=l==null?void 0:l.percentage;return n.formatMessage(S.bannerTitleForPercentageDiscount,{discount:"".concat(p),planName:r})}else if("value"in l){const p=se(e,a),x=(u=(f=d.code.defaultMessage)==null?void 0:f.toString())!=null?u:ee,b=n.formatNumber(p,{style:"currency",currency:x,minimumFractionDigits:0,maximumFractionDigits:2});let y;switch(C){case R:g===1?y=n.formatMessage(S.bannerTitleForSingleMonth,{cost:b,planName:r}):y=n.formatMessage(S.bannerTitleForPluralMonths,{cost:b,num_months:g,planName:r});break;case re:g===1?y=n.formatMessage(S.bannerTitleForSingleYear,{cost:b,planName:r}):y=n.formatMessage(S.bannerTitleForPluralYears,{cost:b,num_years:g,planName:r});break;case ae:throw new Error("Period 'hour' is not supported")}return y}}function lt(n,e,a,c){var p,x;const{duration:r}=a,{currencySymbol:l}=oe(c,e.currency),i=r?r.period:R,d=r?r.num_periods:1,C=(x=(p=l.code.defaultMessage)==null?void 0:p.toString())!=null?x:ee,g=se(e,a),f=n.formatNumber(g,{style:"currency",currency:C,minimumFractionDigits:0,maximumFractionDigits:2});let u;switch(i){case R:d===1?u=n.formatMessage(S.bannerContentForSingleMonth,{cost:f}):u=n.formatMessage(S.bannerContentForPluralMonths,{num_months:d,cost:f});break;case re:d===1?u=n.formatMessage(S.bannerContentForSingleYear,{cost:f}):u=n.formatMessage(S.bannerContentForPluralYears,{num_years:d,cost:f});break;case ae:throw new Error("Period 'hour' is not supported")}return u}const S=Q({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),J=1024*1024*4,X=()=>{"use forget";const n=Z.c(1);let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx("span",{className:"text-token-text-tertiary font-normal",children:t.jsx(M,h({},s.optionalText))}),n[0]=e):e=n[0],e},dt=n=>{"use forget";const e=Z.c(15),{previewUrl:a,isDragActive:c}=n,r=k(),l=De();if(!a||c){const u=c?"border-green-600 bg-green-600/30 text-green-600":"border-token-border-heavy text-token-text-tertiary";let p;e[0]!==u?(p=$("rounded-xl border border-dashed p-4",u),e[0]=u,e[1]=p):p=e[1];let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(nt,{className:"h-6 w-6"}),e[2]=x):x=e[2];let b;return e[3]!==p?(b=t.jsx("span",{className:p,children:x}),e[3]=p,e[4]=b):b=e[4],b}const i=l&&"bg-white";let d;e[5]!==i?(d=$("bg-token-bg-tertiary overflow-hidden rounded-xl border",i),e[5]=i,e[6]=d):d=e[6];let C;e[7]!==r?(C=r.formatMessage(s.iconPreviewAlt),e[7]=r,e[8]=C):C=e[8];let g;e[9]!==a||e[10]!==C?(g=t.jsx("img",{src:a,alt:C,className:"h-14 w-14 object-cover"}),e[9]=a,e[10]=C,e[11]=g):g=e[11];let f;return e[12]!==d||e[13]!==g?(f=t.jsx("span",{className:d,children:g}),e[12]=d,e[13]=g,e[14]=f):f=e[14],f},ut=n=>new Promise((e,a)=>{const c=new FileReader;c.onloadend=()=>e(c.result),c.onerror=()=>a(),c.readAsDataURL(n)}),Tt=({onClose:n})=>{"use forget";const e=je(),{mutateAsync:a,isPending:c}=Ne(Ie.CONNECTOR_SETTING),r=k(),[l,i]=v.useState(!1),[d,C]=v.useState("OAUTH"),[g,f]=v.useState(!1),u=Qe({defaultValues:{name:"",url:"",description:"",oauthClientId:"",oauthClientSecret:""},onSubmit:async({value:o})=>{var U,G,Y;const m=p?await ut(p):null;let L=[],B=null;if(d==="OAUTH")try{const T=await Ae(o.url.trim());if(L=[T],A){const _=o.oauthClientId.trim(),O=o.oauthClientSecret.trim();if(_!==""||O!==""){if(!_){e.danger(r.formatMessage(s.clientIdRequired));return}if(!O){e.danger(r.formatMessage(s.clientSecretRequired));return}B={client_id:_,client_secret:O,scopes:(U=T.base_scopes)!=null?U:[]}}}}catch(T){e.danger(r.formatMessage(s.oauthConfigError));return}try{const T=await a({name:o.name.trim(),mcp_url:o.url.trim(),description:o.description.trim(),logo_url:m,supported_auth:L,oauth_client_params:B,authTypeOverride:d});if(!T.implementsRetrievable&&!ie){F(!0);return}n((G=T.connector)==null?void 0:G.id)}catch(T){if(T instanceof W&&T.status===409)e.danger(r.formatMessage(s.duplicateName));else{const _=T instanceof W&&typeof((Y=T.detail)==null?void 0:Y.details)=="string"?T.detail.details:void 0;e.danger(r.formatMessage(s.createConnectorError),{description:_})}return}},validators:{onSubmit:({value:o})=>{const m={};return o.name.trim()||(m.name=r.formatMessage({id:"vtyh9X",defaultMessage:"Name is required"})),o.url.trim()?o.url.trim().match(/^https?:\/\//)||(m.url=r.formatMessage({id:"7hn6Jq",defaultMessage:"URL is invalid"})):m.url=r.formatMessage({id:"7WV2q4",defaultMessage:"URL is required"}),{fields:m}}}}),[p,x]=v.useState(null),[b,y]=v.useState(null),[w,F]=v.useState(!1),D=Re(),A=K(D,"3832963721"),ce=K(D,"735368229"),ie=Oe(),le=o=>{if(b&&URL.revokeObjectURL(b),o.size>J){e.danger(r.formatMessage(s.iconTooLarge));return}x(o);const m=URL.createObjectURL(o);y(m)},{getRootProps:de,getInputProps:ue,isDragActive:me}=at({accept:{"image/*":[]},multiple:!1,noKeyboard:!0,noClick:!0,maxSize:J,onDropAccepted:o=>{o.length>0&&le(o[0])},onDropRejected:()=>{e.danger(r.formatMessage(s.iconInvalid))}}),ge=o=>{o.preventDefault(),g&&(i(!0),u.handleSubmit())};return t.jsx(Ee,{testId:"modal-create-custom-connector",title:t.jsx("span",{className:"flex items-center gap-1",children:t.jsx(M,P(h({},s.createCustomConnectorModalTitle),{values:{betaBadge:t.jsx(ot,{})}}))}),type:"success",isOpen:!0,onClose:()=>n(),showCloseButton:!0,size:"custom",className:"max-w-[448px]",children:t.jsxs("form",{onSubmit:ge,className:"flex flex-col gap-4",children:[t.jsxs("label",P(h({},de({className:"flex cursor-pointer items-center gap-2.5"})),{children:[t.jsx("input",h({},ue())),t.jsx(dt,{previewUrl:b,isDragActive:me}),t.jsxs("span",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:t.jsx(M,P(h({},s.iconTitle),{values:{optionalText:t.jsx(X,{})}}))}),t.jsx("span",{className:"text-token-text-tertiary text-xs",children:t.jsx(M,h({},s.iconDescription))})]})]})),t.jsx(u.Field,{name:"name",children:o=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-name",className:"mb-1 block text-sm font-medium",children:t.jsx(M,h({},s.nameTitle))}),t.jsx(j,{name:"custom-connector-name",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1)},ariaLabel:r.formatMessage(s.nameTitle),placeholder:r.formatMessage(s.namePlaceholder),error:l?o.state.meta.errors[0]:void 0})]})}),t.jsx(u.Field,{name:"description",children:o=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-description",className:"mb-1 block text-sm font-medium",children:t.jsx(M,P(h({},s.descriptionTitle),{values:{optionalText:t.jsx(X,{})}}))}),t.jsx(ke,{name:"custom-connector-description",value:o.state.value,onChange:m=>o.handleChange(m.target.value),ariaLabel:r.formatMessage(s.descriptionTitle,{optionalText:r.formatMessage(s.optionalText)}),placeholder:r.formatMessage(s.descriptionPlaceholder)})]})}),t.jsx(u.Field,{name:"url",children:o=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-url",className:"mb-1 block text-sm font-medium",children:t.jsx(M,h({},s.urlTitle))}),t.jsx(j,{name:"custom-connector-url",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1),w&&F(!1)},ariaLabel:r.formatMessage(s.urlTitle),placeholder:r.formatMessage(s.urlPlaceholder),error:w?t.jsx("span",{children:t.jsx(M,P(h({},ce?s.developerModeConformanceError:s.conformanceError),{values:{link:m=>t.jsx(E,{href:"https://platform.openai.com/docs/mcp",openNewTab:!0,children:m})}}))}):l?o.state.meta.errors[0]:void 0})]})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-auth",className:"mb-1 block text-sm font-medium",children:t.jsx(M,h({},s.authTypeTitle))}),t.jsx(Ze,{options:[{label:r.formatMessage(s.oauthOption),value:"OAUTH"},{label:r.formatMessage(s.noAuthOption),value:"NONE"}],value:d,onValueChange:o=>C(o),triggerId:"custom-connector-auth",triggerClassName:"w-full justify-between border-token-border-medium"})]}),d==="OAUTH"&&A&&t.jsxs(t.Fragment,{children:[t.jsx(u.Field,{name:"oauthClientId",children:o=>t.jsx(j,{name:"custom-connector-client-id",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1)},ariaLabel:r.formatMessage(s.clientIdTitle),placeholder:r.formatMessage(s.oauthClientIdPlaceholder),error:l?o.state.meta.errors[0]:void 0,autoComplete:"off"})}),t.jsx(u.Field,{name:"oauthClientSecret",children:o=>t.jsx(j,{name:"custom-connector-client-secret",type:"password",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1)},ariaLabel:r.formatMessage(s.clientSecretTitle),placeholder:r.formatMessage(s.oauthClientSecretPlaceholder),error:l?o.state.meta.errors[0]:void 0,autoComplete:"off"})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"border-token-border-status-warning bg-token-bg-status-warning text-token-text-status-warning flex items-center gap-2 rounded-t-2xl border border-b-0 px-4 py-3 text-sm font-medium",children:[t.jsx(we,{className:"h-6 w-6"}),t.jsx("span",{children:t.jsx(M,P(h({},s.customConnectorBanner),{values:{link:o=>t.jsx(E,{href:"http://platform.openai.com/docs/mcp#risks-and-safety",openNewTab:!0,className:"inline",children:o},"custom-connector-banner-link")}}))})]}),t.jsxs("label",{htmlFor:"trust-checkbox",className:"flex items-center gap-3 rounded-b-2xl border border-gray-200 bg-white px-4 py-4 text-sm dark:border-gray-700 dark:bg-gray-800",children:[t.jsx(et,{id:"trust-checkbox",onChange:()=>f(o=>!o),disabled:c}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:t.jsx(M,h({},s.customConnectorTrustTitle))}),t.jsx("p",{className:"text-token-text-tertiary text-sm",children:t.jsx(M,h({},s.customConnectorTrustSubtitle))})]})]})]}),t.jsxs("div",{className:"flex w-full items-center justify-between",children:[t.jsxs(E,{href:"http://platform.openai.com/docs/mcp",openNewTab:!0,className:"text-token-text-tertiary text-sm",children:[t.jsx(tt,{className:"me-1.5 inline h-4.5 w-4.5"}),t.jsx(M,h({},s.readTheGuideLink))]}),t.jsx(u.Subscribe,{selector:o=>[o.isSubmitting],children:([o])=>t.jsx(Fe,{type:"submit",loading:o,disabled:!g,children:t.jsx(M,h({},s.createButton))})})]})]})})},s=Q({createCustomConnectorModalTitle:{id:"createCustomConnectorModal.title",defaultMessage:"New Connector {betaBadge}"},iconTitle:{id:"createCustomConnectorModal.iconTitle",defaultMessage:"Icon {optionalText}"},iconDescription:{id:"createCustomConnectorModal.iconDescription",defaultMessage:"Minimum size: 128 x 128 px"},nameTitle:{id:"createCustomConnectorModal.nameTitle",defaultMessage:"Name"},urlTitle:{id:"createCustomConnectorModal.urlTitle",defaultMessage:"MCP Server URL"},descriptionTitle:{id:"createCustomConnectorModal.descriptionTitle",defaultMessage:"Description {optionalText}"},optionalText:{id:"createCustomConnectorModal.optionalText",defaultMessage:"(optional)"},readTheGuideLink:{id:"createCustomConnectorModal.readTheGuideLink",defaultMessage:"Read the guide"},createButton:{id:"createCustomConnectorModal.createButton",defaultMessage:"Create"},iconPreviewAlt:{id:"createCustomConnectorModal.iconPreviewAlt",defaultMessage:"Icon preview"},namePlaceholder:{id:"createCustomConnectorModal.namePlaceholder",defaultMessage:"Custom Tool"},urlPlaceholder:{id:"createCustomConnectorModal.urlPlaceholder",defaultMessage:"https://example.com/sse"},descriptionPlaceholder:{id:"createCustomConnectorModal.descriptionPlaceholder",defaultMessage:"Explain what it does in a few words"},iconTooLarge:{id:"createCustomConnectorModal.iconTooLarge",defaultMessage:"Icon is too large"},iconInvalid:{id:"createCustomConnectorModal.iconInvalid",defaultMessage:"Invalid icon"},authTypeTitle:{id:"createCustomConnectorModal.authTypeTitle",defaultMessage:"Authentication"},oauthOption:{id:"createCustomConnectorModal.oauthOption",defaultMessage:"OAuth"},noAuthOption:{id:"createCustomConnectorModal.noAuthOption",defaultMessage:"No authentication"},oauthConfigError:{id:"createCustomConnectorModal.oauthConfigError",defaultMessage:"Error fetching OAuth configuration"},customConnectorBanner:{id:"createCustomConnectorModal.customConnectorBanner",defaultMessage:"Beta intended for developer use only. <link>Learn more</link>"},customConnectorTrustTitle:{id:"createCustomConnectorModal.customConnectorTrustTitle",defaultMessage:"I trust this application"},customConnectorTrustSubtitle:{id:"createCustomConnectorModal.customConnectorTrustSubtitle",defaultMessage:"Custom connectors are not verified by OpenAI. Malicious developers may attempt to steal your data."},conformanceError:{id:"createCustomConnectorModal.conformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>"},developerModeConformanceError:{id:"createCustomConnectorModal.developerModeConformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>. Enable Developer Mode in Advanced Connector Settings to create custom connectors that support arbitrary tool calls"},createConnectorError:{id:"createCustomConnectorModal.createConnectorError",defaultMessage:"Error creating connector"},duplicateName:{id:"createCustomConnectorModal.duplicateName",defaultMessage:"Connector name already exists"},clientIdTitle:{id:"createCustomConnectorModal.clientIdTitle",defaultMessage:"OAuth client ID"},oauthClientIdPlaceholder:{id:"createCustomConnectorModal.oauthClientIdPlaceholder",defaultMessage:"Client ID (Optional)"},clientSecretTitle:{id:"createCustomConnectorModal.clientSecretTitle",defaultMessage:"OAuth client secret"},oauthClientSecretPlaceholder:{id:"createCustomConnectorModal.oauthClientSecretPlaceholder",defaultMessage:"Client Secret (Optional)"},clientIdRequired:{id:"createCustomConnectorModal.clientIdRequired",defaultMessage:"Enter a client ID or remove the client secret"},clientSecretRequired:{id:"createCustomConnectorModal.clientSecretRequired",defaultMessage:"Enter a client secret or remove the client ID"}});export{Tt as C,bt as P,ne as a,Mt as u};
//# sourceMappingURL=d0imfrhbhhd08mu9.js.map
